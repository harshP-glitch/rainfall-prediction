# -*- coding: utf-8 -*-
"""app.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/14hULln8nG1Jr8ZA8-VxTiORVqSzXjktf
"""
import streamlit as st
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# Title
st.title("Rainfall Prediction Dashboard")

# Load the dataset
uploaded_file = st.file_uploader("Upload your CSV dataset", type=["csv"])
if uploaded_file is not None:
    data = pd.read_csv(uploaded_file)

    st.subheader("Raw Dataset Preview")
    st.dataframe(data.head())

    # Show summary
    st.subheader("Statistical Summary")
    st.write(data.describe())

    # Variability / Standard Deviation
    st.subheader("Variability (Standard Deviation)")
    std_dev = data.std(numeric_only=True)
    st.write(std_dev)

    # Line Chart of Rainfall over Time
    if 'Date' in data.columns and 'Rainfall' in data.columns:
        data['Date'] = pd.to_datetime(data['Date'], errors='coerce')
        data = data.dropna(subset=['Date'])
        data = data.sort_values('Date')

        st.subheader("Rainfall Over Time")
        st.line_chart(data.set_index('Date')['Rainfall'])

    # Histogram of Rainfall
    st.subheader("Rainfall Distribution")
    fig, ax = plt.subplots()
    sns.histplot(data['Rainfall'], bins=30, kde=True, ax=ax)
    ax.set_xlabel("Rainfall (mm)")
    ax.set_ylabel("Frequency")
    st.pyplot(fig)

    # Boxplot to show variability
    st.subheader("Rainfall Variability - Boxplot")
    fig2, ax2 = plt.subplots()
    sns.boxplot(y=data["Rainfall"], ax=ax2)
    st.pyplot(fig2)

    # Correlation Heatmap (if other numeric columns exist)
    numeric_cols = data.select_dtypes(include=np.number)
    if len(numeric_cols.columns) > 1:
        st.subheader("Correlation Heatmap")
        fig3, ax3 = plt.subplots()
        sns.heatmap(numeric_cols.corr(), annot=True, cmap='coolwarm', ax=ax3)
        st.pyplot(fig3)

else:
    st.warning("Please upload a CSV file to begin.")
